################################################
#
#              Generated by Chef
#
################################################

Listen <%="#{node[:bcpc][:management][:ip]}"%>:5000
Listen <%="#{node[:bcpc][:management][:ip]}"%>:35357

WSGIDaemonProcess keystone user=keystone group=keystone processes=3 threads=10

<VirtualHost <%="#{node[:bcpc][:management][:ip]}"%>:5000>
	WSGIScriptAlias / /opt/openstack/keystone-main.cgi
	WSGIProcessGroup keystone

	LogLevel warn
	ErrorLog ${APACHE_LOG_DIR}/keystone-error.log
	CustomLog ${APACHE_LOG_DIR}/keystone-access.log combined

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/ssl-bcpc.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-bcpc.key
	SSLVerifyClient optional
	SSLVerifyDepth 10
	SSLProtocol all -SSLv2
	SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
	SSLOptions +StdEnvVars +ExportCertData
</VirtualHost>

<VirtualHost <%="#{node[:bcpc][:management][:ip]}"%>:35357>
	WSGIScriptAlias / /opt/openstack/keystone-admin.cgi
	WSGIProcessGroup keystone

	LogLevel warn
	ErrorLog ${APACHE_LOG_DIR}/keystone-error.log
	CustomLog ${APACHE_LOG_DIR}/keystone-access.log combined

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/ssl-bcpc.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-bcpc.key
	SSLVerifyClient optional
	SSLVerifyDepth 10
	SSLProtocol all -SSLv2
	SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
	SSLOptions +StdEnvVars +ExportCertData
</VirtualHost>
